<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthAI Pulse Aggregator | Healthcare IT & AI Intelligence</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Base Styles */
        :root {
            --slate-50: #f8fafc;
            --slate-100: #f1f5f9;
            --slate-200: #e2e8f0;
            --slate-300: #cbd5e1;
            --slate-400: #94a3b8;
            --slate-500: #64748b;
            --slate-600: #475569;
            --slate-700: #334155;
            --slate-800: #1e293b;
            --slate-900: #0f172a;
            
            --emerald-50: #ecfdf5;
            --emerald-100: #d1fae5;
            --emerald-500: #10b981;
            --emerald-600: #059669;
            --emerald-700: #047857;
            
            --blue-50: #eff6ff;
            --blue-100: #dbeafe;
            --blue-500: #3b82f6;
            --blue-600: #2563eb;
            --blue-700: #1d4ed8;
            
            --indigo-50: #eef2ff;
            --indigo-100: #e0e7ff;
            --indigo-500: #6366f1;
            --indigo-600: #4f46e5;
            
            --amber-500: #f59e0b;
            
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            
            --radius-sm: 0.375rem;
            --radius: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--slate-50);
            color: var(--slate-800);
            line-height: 1.5;
        }

        /* App Container */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 16rem;
            background-color: white;
            border-right: 1px solid var(--slate-200);
            display: flex;
            flex-direction: column;
            position: sticky;
            top: 0;
            height: 100vh;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--slate-100);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            background-color: var(--emerald-600);
            color: white;
            padding: 0.5rem;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-icon i {
            font-size: 1.25rem;
        }

        .logo-text h1 {
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--slate-800);
        }

        .logo-subtitle {
            font-size: 0.625rem;
            color: var(--emerald-600);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            display: block;
            margin-top: 0.125rem;
        }

        .sidebar-nav {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .nav-section {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .nav-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--slate-400);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0 0.75rem;
            margin-bottom: 0.5rem;
        // ===== CONSTANTS & DATA =====
        const DEFAULT_SOURCES = [
            {
                id: 'healthcare-it-today',
                name: 'Healthcare IT Today',
                url: 'https://www.healthcareittoday.com/feed/',
                homepage: 'https://www.healthcareittoday.com/',
                category: 'Health IT & AI',
                enabled: true
            },
            {
                id: 'nejm-ai-podcast',
                name: 'NEJM AI Podcast',
                url: 'https://ai-podcast.nejm.org/feed.xml',
                homepage: 'https://ai-podcast.nejm.org/',
                category: 'Clinical AI',
                enabled: true
            }
        ];

        const AI_KEYWORDS = [
            'ai', 'artificial intelligence', 'machine learning', 'deep learning', 
            'neural network', 'algorithm', 'automated', 'generative', 'llm', 
            'gpt', 'nlp', 'computer vision', 'robotics', 'predictive modeling',
            'data science', 'computational', 'chatbot', 'copilot'
        ];

        const CORS_PROXY = 'https://corsproxy.io/?';

        // ===== STATE =====
        let state = {
            currentView: 'feed',
            articles: [],
            loading: true,
            searchQuery: '',
            activeSourceId: null,
            config: {
                refreshInterval: 60,
                sources: DEFAULT_SOURCES
            },
            bookmarks: new Set()
        };

        // ===== DOM ELEMENTS =====
        const elements = {
            sidebar: document.getElementById('sidebar'),
            unreadCount: document.getElementById('unread-count'),
            sourceList: document.getElementById('source-list'),
            searchInput: document.getElementById('search-input'),
            refreshBtn: document.getElementById('refresh-btn'),
            feedTitle: document.getElementById('feed-title'),
            feedSubtitle: document.getElementById('feed-subtitle'),
            resetFilterBtn: document.getElementById('reset-filter-btn'),
            loadingState: document.getElementById('loading-state'),
            articlesGrid: document.getElementById('articles-grid'),
            emptyState: document.getElementById('empty-state'),
            adminPanel: document.getElementById('admin-panel'),
            feedContent: document.getElementById('feed-content')
        };

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            loadStateFromStorage();
            setupEventListeners();
            renderSidebar();
            loadData();
            setupAutoRefresh();
        });

        // ===== STATE MANAGEMENT =====
        function loadStateFromStorage() {
            try {
                const savedConfig = localStorage.getItem('healthcare_it_ai_config');
                if (savedConfig) {
                    state.config = JSON.parse(savedConfig);
                }
                
                const savedBookmarks = localStorage.getItem('healthcare_it_ai_bookmarks');
                if (savedBookmarks) {
                    state.bookmarks = new Set(JSON.parse(savedBookmarks));
                }
            } catch (e) {
                console.error('Error loading state:', e);
            }
        }

        function saveStateToStorage() {
            try {
                localStorage.setItem('healthcare_it_ai_config', JSON.stringify(state.config));
                localStorage.setItem('healthcare_it_ai_bookmarks', JSON.stringify(Array.from(state.bookmarks)));
            } catch (e) {
                console.error('Error saving state:', e);
            }
        }

        // ===== EVENT LISTENERS =====
        function setupEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-item[data-view]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const view = btn.dataset.view;
                    setCurrentView(view);
                });
            });

            // Source filtering
            elements.sidebar.addEventListener('click', (e) => {
                const sourceBtn = e.target.closest('.source-item');
                if (sourceBtn) {
                    const sourceId = sourceBtn.dataset.source;
                    setActiveSourceId(sourceId === 'all' ? null : sourceId);
                }
            });

            // Search
            elements.searchInput.addEventListener('input', (e) => {
                state.searchQuery = e.target.value;
                renderArticles();
            });

            // Refresh
            elements.refreshBtn.addEventListener('click', () => {
                elements.refreshBtn.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i>';
                setTimeout(() => {
                    elements.refreshBtn.innerHTML = '<i class="fas fa-sync-alt"></i><span class="refresh-text">Refresh</span>';
                }, 1000);
                loadData();
            });

            // Reset filter
            elements.resetFilterBtn.addEventListener('click', () => {
                setActiveSourceId(null);
            });
        }

        // ===== VIEW MANAGEMENT =====
        function setCurrentView(view) {
            state.currentView = view;
            
            // Update active nav item
            document.querySelectorAll('.nav-item[data-view]').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.view === view);
            });
            
            // Show/hide panels
            if (view === 'admin') {
                elements.adminPanel.classList.remove('hidden');
                elements.feedContent.classList.add('hidden');
                renderAdminPanel();
            } else {
                elements.adminPanel.classList.add('hidden');
                elements.feedContent.classList.remove('hidden');
                updateFeedTitle();
                renderArticles();
            }
        }

        function setActiveSourceId(sourceId) {
            state.activeSourceId = sourceId;
            
            // Update sidebar
            document.querySelectorAll('.source-item').forEach(btn => {
                const isActive = (sourceId === null && btn.dataset.source === 'all') || 
                                btn.dataset.source === sourceId;
                btn.classList.toggle('active', isActive);
            });
            
            // Update reset button
            elements.resetFilterBtn.classList.toggle('hidden', sourceId === null);
            
            updateFeedTitle();
            renderArticles();
        }

        function updateFeedTitle() {
            if (state.currentView === 'bookmarks') {
                elements.feedTitle.textContent = 'Saved Research';
                elements.feedSubtitle.textContent = 'Your bookmarked AI healthcare insights';
            } else if (state.activeSourceId) {
                const source = state.config.sources.find(s => s.id === state.activeSourceId);
                elements.feedTitle.textContent = source ? source.name : 'Healthcare IT & AI Intelligence';
                elements.feedSubtitle.textContent = 'Monitoring specialized Artificial Intelligence developments in Healthcare.';
            } else {
                elements.feedTitle.textContent = 'Healthcare IT & AI Intelligence';
                elements.feedSubtitle.textContent = 'Monitoring specialized Artificial Intelligence developments in Healthcare.';
            }
        }

        // ===== SIDEBAR RENDERING =====
        function renderSidebar() {
            // Update unread count
            const unread = state.articles.filter(a => !state.bookmarks.has(a.id)).length;
            elements.unreadCount.textContent = unread;
            
            // Render sources
            elements.sourceList.innerHTML = '';
            state.config.sources.forEach(source => {
                const sourceItem = document.createElement('button');
                sourceItem.className = 'nav-item source-item';
                if (state.activeSourceId === source.id) sourceItem.classList.add('active');
                sourceItem.dataset.source = source.id;
                sourceItem.innerHTML = `
                    <div class="nav-item-content">
                        <div class="source-dot"></div>
                        <span class="source-name">${source.name}</span>
                    </div>
                `;
                elements.sourceList.appendChild(sourceItem);
            });
        }

        // ===== DATA FETCHING =====
        async function fetchFeed(source) {
            try {
                const targetUrl = source.url;
                const proxiedUrl = `${CORS_PROXY}${encodeURIComponent(targetUrl)}`;
                
                const response = await fetch(proxiedUrl, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/rss+xml, application/xml, text/xml, */*'
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const xmlText = await response.text();
                if (!xmlText || xmlText.trim().length === 0) {
                    throw new Error('Empty response');
                }

                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
                
                const items = Array.from(xmlDoc.querySelectorAll('item'));
                if (items.length === 0) return [];
                
                return items.map(item => {
                    const title = item.querySelector('title')?.textContent || 'Untitled';
                    const link = item.querySelector('link')?.textContent || 
                                item.querySelector('link')?.getAttribute('href') || '';
                    const pubDate = item.querySelector('pubDate')?.textContent || 
                                   item.querySelector('date')?.textContent || 
                                   new Date().toISOString();
                    
                    const summary = item.querySelector('description')?.textContent || 
                                   item.querySelector('content\\:encoded')?.textContent || 
                                   item.querySelector('encoded')?.textContent || '';
                    
                    const author = item.querySelector('dc\\:creator')?.textContent || 
                                  item.querySelector('author')?.textContent || 
                                  item.querySelector('creator')?.textContent || 'Unknown';
                    
                    const categories = Array.from(item.querySelectorAll('category'))
                        .map(cat => cat.textContent || '')
                        .filter(cat => cat.length > 0);

                    const guid = item.querySelector('guid')?.textContent;
                    const isPermalink = item.querySelector('guid')?.getAttribute('isPermaLink') !== 'false';
                    const exactLink = (guid && isPermalink) ? guid : link;

                    return {
                        id: btoa(exactLink).slice(0, 16),
                        title: title.trim(),
                        link: exactLink.trim(),
                        pubDate: new Date(pubDate).toISOString(),
                        summary: summary.replace(/<[^>]*>?/gm, '').slice(0, 300).trim() + (summary.length > 300 ? '...' : ''),
                        author: author.trim(),
                        categories,
                        sourceName: source.name,
                        sourceUrl: source.homepage,
                        bookmarked: state.bookmarks.has(btoa(exactLink).slice(0, 16))
                    };
                });
            } catch (error) {
                console.error(`Error fetching ${source.name}:`, error);
                return [];
            }
        }

        async function loadData() {
            state.loading = true;
            renderLoadingState();
            
            try {
                const enabledSources = state.config.sources.filter(s => s.enabled);
                const allPromises = enabledSources.map(source => fetchFeed(source));
                const allResults = await Promise.all(allPromises);
                
                // Flatten and merge
                let flatItems = allResults.flat();
                
                // Sort by date desc
                flatItems.sort((a, b) => new Date(b.pubDate).getTime() - new Date(a.pubDate).getTime());
                
                // STRICT AI FILTERING
                const strictlyAIItems = flatItems.filter(item => {
                    const content = (item.title + ' ' + item.summary + ' ' + item.categories.join(' ')).toLowerCase();
                    return AI_KEYWORDS.some(keyword => {
                        if (keyword === 'ai') {
                            return content.split(/\W+/).includes('ai');
                        }
                        return content.includes(keyword.toLowerCase());
                    });
                });
                
                // Update with bookmark status
                state.articles = strictlyAIItems.map(item => ({
                    ...item,
                    bookmarked: state.bookmarks.has(item.id)
                }));
                
            } catch (error) {
                console.error('Error loading data:', error);
                state.articles = [];
            }
            
            state.loading = false;
            renderArticles();
            renderSidebar();
            saveStateToStorage();
        }

        // ===== ARTICLE RENDERING =====
        function renderLoadingState() {
            elements.loadingState.classList.remove('hidden');
            elements.articlesGrid.classList.add('hidden');
            elements.emptyState.classList.add('hidden');
        }

        function renderArticles() {
            if (state.loading) {
                renderLoadingState();
                return;
            }
            
            // Filter articles
            const displayArticles = state.articles.filter(article => {
                const matchesSearch = state.searchQuery === '' || 
                    article.title.toLowerCase().includes(state.searchQuery.toLowerCase()) || 
                    article.summary.toLowerCase().includes(state.searchQuery.toLowerCase());
                
                const matchesSource = state.activeSourceId ? 
                    article.sourceName === state.config.sources.find(s => s.id === state.activeSourceId)?.name : true;
                
                const matchesView = state.currentView === 'bookmarks' ? article.bookmarked : true;
                
                return matchesSearch && matchesSource && matchesView;
            });
            
            // Show/hide states
            if (displayArticles.length === 0) {
                elements.loadingState.classList.add('hidden');
                elements.articlesGrid.classList.add('hidden');
                elements.emptyState.classList.remove('hidden');
                return;
            }
            
            elements.loadingState.classList.add('hidden');
            elements.emptyState.classList.add('hidden');
            elements.articlesGrid.classList.remove('hidden');
            
            // Render articles
            elements.articlesGrid.innerHTML = '';
            displayArticles.forEach(article => {
                const articleEl = createArticleElement(article);
                elements.articlesGrid.appendChild(articleEl);
            });
        }

        function createArticleElement(article) {
            const template = document.getElementById('article-template');
            const clone = template.content.cloneNode(true);
            const articleEl = clone.querySelector('.article-card');
            
            // Set data
            articleEl.dataset.id = article.id;
            
            // Source
            articleEl.querySelector('.article-source').textContent = article.sourceName;
            
            // Bookmark button
            const bookmarkBtn = articleEl.querySelector('.bookmark-btn');
            if (article.bookmarked) {
                bookmarkBtn.classList.add('active');
                bookmarkBtn.innerHTML = '<i class="fas fa-bookmark"></i>';
            }
            bookmarkBtn.addEventListener('click', () => toggleBookmark(article.id));
            
            // Title
            const titleLink = articleEl.querySelector('.article-title a');
            titleLink.textContent = article.title;
            titleLink.href = article.link;
            
            // Date
            const formattedDate = new Date(article.pubDate).toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric'
            });
            articleEl.querySelector('.date-text').textContent = formattedDate;
            
            // Author
            articleEl.querySelector('.author-text').textContent = article.author;
            
            // Summary
            articleEl.querySelector('.article-summary').textContent = article.summary;
            
            // Tags
            const tagsContainer = articleEl.querySelector('.article-tags');
            article.categories.slice(0, 3).forEach(cat => {
                const tag = document.createElement('span');
                tag.textContent = cat;
                tagsContainer.appendChild(tag);
            });
            
            // AI Insight button
            const aiBtn = articleEl.querySelector('.ai-insight-btn');
            aiBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                if (!articleEl.querySelector('.ai-insight').classList.contains('hidden')) return;
                
                aiBtn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Generating...';
                aiBtn.disabled = true;
                
                // Simulate AI generation
                setTimeout(() => {
                    const insights = [
                        "This represents a shift toward AI-assisted clinical decision support systems in healthcare IT.",
                        "The integration of machine learning in this domain shows growing institutional adoption.",
                        "This development aligns with regulatory trends toward explainable AI in medical applications.",
                        "Signals increased investment in healthcare AI infrastructure and validation frameworks."
                    ];
                    
                    const aiInsightEl = articleEl.querySelector('.ai-insight');
                    const aiTextEl = articleEl.querySelector('.ai-text');
                    
                    aiTextEl.textContent = insights[Math.floor(Math.random() * insights.length)];
                    aiInsightEl.classList.remove('hidden');
                    
                    aiBtn.innerHTML = '<i class="fas fa-wand-magic-sparkles"></i> Insight Ready';
                    aiBtn.disabled = true;
                    aiBtn.style.opacity = '0.6';
                }, 1500);
            });
            
            // Read full button
            articleEl.querySelector('.read-full-btn').href = article.link;
            
            return articleEl;
        }

        // ===== BOOKMARK MANAGEMENT =====
        function toggleBookmark(articleId) {
            if (state.bookmarks.has(articleId)) {
                state.bookmarks.delete(articleId);
            } else {
                state.bookmarks.add(articleId);
            }
            
            // Update article in state
            state.articles = state.articles.map(article => 
                article.id === articleId ? { ...article, bookmarked: !article.bookmarked } : article
            );
            
            // Update UI
            const articleEl = document.querySelector(`.article-card[data-id="${articleId}"]`);
            if (articleEl) {
                const bookmarkBtn = articleEl.querySelector('.bookmark-btn');
                bookmarkBtn.classList.toggle('active');
                bookmarkBtn.innerHTML = state.bookmarks.has(articleId) ? 
                    '<i class="fas fa-bookmark"></i>' : 
                    '<i class="far fa-bookmark"></i>';
            }
            
            // Update sidebar
            renderSidebar();
            
            // Save to storage
            saveStateToStorage();
            
            // Re-render if in bookmarks view
            if (state.currentView === 'bookmarks') {
                renderArticles();
            }
        }

        // ===== ADMIN PANEL =====
        function renderAdminPanel() {
            elements.adminPanel.innerHTML = `
                <div class="admin-panel-content">
                    <div class="admin-header">
                        <div>
                            <h2>Admin Console</h2>
                            <p>Configure your aggregation sources and sync behavior.</p>
                        </div>
                        <button id="admin-save-btn" class="admin-save-btn">
                            Save Changes
                        </button>
                    </div>
                    
                    <div class="admin-grid">
                        <div class="admin-sidebar">
                            <section class="admin-section">
                                <h3><i class="fas fa-clock"></i> Sync Interval</h3>
                                <div class="admin-form">
                                    <label>
                                        <span>Refresh data every (minutes)</span>
                                        <input type="number" id="refresh-interval" value="${state.config.refreshInterval}" min="5" max="1440">
                                    </label>
                                    <p class="admin-note">Frequent refreshes may consume more data and API quota. Recommended: 30-60 mins.</p>
                                </div>
                            </section>
                            
                            <section class="admin-section">
                                <h3><i class="fas fa-circle-info"></i> System Status</h3>
                                <div class="status-list">
                                    <div class="status-item">
                                        <span>Last Sync</span>
                                        <span>Just now</span>
                                    </div>
                                    <div class="status-item">
                                        <span>Active Sources</span>
                                        <span>${state.config.sources.filter(s => s.enabled).length}</span>
                                    </div>
                                    <div class="status-item">
                                        <span>Storage Used</span>
                                        <span>1.2 MB</span>
                                    </div>
                                </div>
                            </section>
                        </div>
                        
                        <div class="admin-main">
                            <section class="admin-section">
                                <h3><i class="fas fa-rss"></i> Source Management</h3>
                                <div class="sources-list">
                                    ${state.config.sources.map(source => `
                                        <div class="source-item-admin" data-id="${source.id}">
                                            <div>
                                                <div class="source-name-admin">${source.name}</div>
                                                <div class="source-url">${source.url}</div>
                                            </div>
                                            <div class="source-actions">
                                                <span class="source-category">${source.category}</span>
                                                <button class="remove-source-btn" data-id="${source.id}">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                                
                                <h4>Add New Source</h4>
                                <div class="add-source-form">
                                    <div class="form-row">
                                        <input type="text" id="new-source-name" placeholder="Source Name (e.g. Lancet Digital)">
                                        <input type="text" id="new-source-category" placeholder="Category">
                                    </div>
                                    <div class="form-row">
                                        <input type="text" id="new-source-url" placeholder="RSS Feed URL">
                                        <button id="add-source-btn">Add Source</button>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            `;
            
            setupAdminEvents();
        }

        function setupAdminEvents() {
            // Save button
            document.getElementById('admin-save-btn').addEventListener('click', saveAdminChanges);
            
            // Remove source buttons
            document.querySelectorAll('.remove-source-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const sourceId = e.currentTarget.dataset.id;
                    removeSource(sourceId);
                });
            });
            
            // Add source button
            document.getElementById('add-source-btn').addEventListener('click', addNewSource);
        }

        function saveAdminChanges() {
            const refreshInterval = parseInt(document.getElementById('refresh-interval').value);
            state.config.refreshInterval = refreshInterval;
            saveStateToStorage();
            alert('Settings updated successfully!');
        }

        function removeSource(sourceId) {
            state.config.sources = state.config.sources.filter(s => s.id !== sourceId);
            saveStateToStorage();
            renderAdminPanel();
            renderSidebar();
        }

        function addNewSource() {
            const name = document.getElementById('new-source-name').value.trim();
            const url = document.getElementById('new-source-url').value.trim();
            const category = document.getElementById('new-source-category').value.trim();
            
            if (!name || !url) {
                alert('Please enter both name and URL');
                return;
            }
            
            try {
                new URL(url);
            } catch {
                alert('Please enter a valid URL');
                return;
            }
            
            const newSource = {
                id: Math.random().toString(36).substr(2, 9),
                name,
                url,
                homepage: new URL(url).origin,
                category: category || 'General',
                enabled: true
            };
            
            state.config.sources.push(newSource);
            saveStateToStorage();
            renderAdminPanel();
            renderSidebar();
            
            // Clear form
            document.getElementById('new-source-name').value = '';
            document.getElementById('new-source-url').value = '';
            document.getElementById('new-source-category').value = '';
        }

        // ===== AUTO REFRESH =====
        function setupAutoRefresh() {
            setInterval(() => {
                if (state.currentView === 'feed' && !state.loading) {
                    loadData();
                }
            }, state.config.refreshInterval * 60 * 1000);
        }
    </script>
